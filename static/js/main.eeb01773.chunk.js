(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(t,e,n){t.exports=n(26)},,,,,function(t,e,n){},,function(t,e,n){},,function(t,e,n){},,function(t,e,n){},,function(t,e,n){},,function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(9),s=n.n(i),o=(n(16),n(1)),c=n(2),u=n(5),h=n(3),l=n(4),p=n(6),v=n(7),d=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"onDrop",value:function(t){var e=this.props,n=e&&e.onDrop,a=t.dataTransfer&&t.dataTransfer.getData("text");t.preventDefault(),this.setState({hovered:!1},function(){return n&&n(a)})}},{key:"onDragOver",value:function(t){var e=this.props;e&&e.isFree&&t.preventDefault()}},{key:"onDragLeave",value:function(t){this.setState({hovered:!1})}},{key:"onDragEnter",value:function(t){this.setState({hovered:!0})}},{key:"render",value:function(){var t=this.props,e=this.state,n=e&&e.hovered,a=t&&t.markup,i=[].concat(["sq"],a||[]).concat(n?["hovered"]:[]).join(" ");return r.a.createElement("div",{className:i,onDrop:this.onDrop.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragOver:this.onDragOver.bind(this)})}}]),e}(r.a.Component),f=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props,e=t&&t.value||" ";return r.a.createElement("div",{className:"lbl"},e)}}]),e}(r.a.Component),b=(n(18),function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"renderCell",value:function(t,e){return 0===t||9===t||0===e||9===e?this.renderLabel(t,e):this.renderSquare(t,e)}},{key:"renderLabel",value:function(t,e){var n=" abcdefgh ".split(""),a=" 87654321 ".split(""),i=0===t||9===t?n[e]:a[t];return r.a.createElement(f,{key:"L".concat(t,"x").concat(e,"}"),value:i})}},{key:"renderSquare",value:function(t,n){var a=this.props,i=a&&a.data,s=i&&i[t-1],o=s&&s.split(e.symbols.SEPARATOR),c=this.getMarkup(o&&o[n-1],t,n),u=o&&o[n-1]&&o[n-1]===e.symbols.EMPTY_CELL;return r.a.createElement(d,{key:"C".concat(t,"x").concat(n,"}"),isFree:u,markup:c,onDrop:this.onDrop.bind(this,t,n)})}},{key:"getMarkup",value:function(t,n,a){var r=[],i=n%2?(a+1)%2:a%2;if(r.push(i?"black":"white"),"undefined"===typeof t)return r;var s=t.toUpperCase();return s!==e.symbols.EMPTY_CELL&&r.push(s),s.match(/1$/)&&r.push("withWhite"),s.match(/2$/)&&r.push("withBlack"),r}},{key:"onDrop",value:function(t,e,n){var a=this.props,r=a&&a.onDrop;r&&r(t,e,n)}},{key:"render",value:function(){for(var t=[],e=0;e<10;e++)for(var n=0;n<10;n++)t.push(this.renderCell(e,n));return r.a.createElement("div",{className:"ChessBoard"},t)}}]),e}(r.a.Component));b.symbols={SEPARATOR:" ",EMPTY_CELL:"-",SELECTED_CELL:"X",WHITE_QUEEN_KNIGHT:"QN1",BLACK_PAWN:"P2"};var m=b,g=n(10),E=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"onDragStart",value:function(t){var e=this.props;t.dataTransfer&&t.dataTransfer.setData("text",e.transport),e.onDragStart&&e.onDragStart(t)}},{key:"render",value:function(){var t=this.props,e=(t.onDragStart,Object(g.a)(t,["onDragStart"]));return r.a.createElement("div",Object.assign({onDragStart:this.onDragStart.bind(this),draggable:"true"},e))}}]),e}(r.a.Component),y=(n(20),function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=r.a.Children.toArray(this.props.children),e=t[0],n=t[1],a=t[2],i=t[3],s=t[4];return r.a.createElement("div",{id:"main"},r.a.createElement("div",{id:"left"},e),r.a.createElement("div",{id:"right"},r.a.createElement("div",{id:"top"},s),r.a.createElement("div",{id:"bottom"},n,a,i)))}}]),e}(r.a.Component)),O=function(t,e){return"abcdefgh".split("")[e-1]+(9-t)},k=(n(22),function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(u.a)(this,Object(h.a)(e).call(this,t))).state={ready:!1,finished:!1,knightPos:null,pawnPos:null,message:e.strings.MSG_INITIAL},n.animate=n.animate.bind(Object(v.a)(Object(v.a)(n))),n}return Object(l.a)(e,t),Object(c.a)(e,[{key:"generateTableData",value:function(){var t=this.state,e=[],n=new Array(8),a=new Array(8);return n.fill(m.symbols.EMPTY_CELL,0,8),n=n.join(m.symbols.SEPARATOR),a.fill(n,0,8),t?(t.path&&t.path.forEach(function(t){e.push([m.symbols.SELECTED_CELL].concat(Object(p.a)(t)))}),t.pawnPos&&e.push([m.symbols.BLACK_PAWN].concat(Object(p.a)(t.pawnPos))),t.knightPos&&e.push([m.symbols.WHITE_QUEEN_KNIGHT].concat(Object(p.a)(t.knightPos))),this.addPieces(e,a)):a}},{key:"addPieces",value:function(t,e){var n=m.symbols.SEPARATOR,a=e.slice();return t.forEach(function(t){var e=t[0],r=t[1]-1,i=t[2]-1,s=a[r];(s=s.split(n))[i]=e,a[r]=s.join(n)}),a}},{key:"animate",value:function(){var t=this,n=this.state,a=n&&n.path&&n.path.slice(),r=n&&n.pawnPos;n&&n.busy||this.setState({busy:!0,ready:!1,message:e.strings.MSG_KNIGHT_WALKING}),a&&a.length?this.moveKnightTo.apply(this,Object(p.a)(a.shift())).then(function(){return t.setState({path:a},function(){return setTimeout(function(){return t.animate()},500)})}):r?this.moveKnightTo.apply(this,Object(p.a)(r)).then(function(){return t.setState({pawnPos:null},function(){return t.animate()})}):this.setState({message:e.strings.MSG_THE_END,finished:!0})}},{key:"moveKnightTo",value:function(t,e){var n=this;return new Promise(function(a,r){var i=n.state.knightPos,s=i[0],o=i[1],c=!1;s!==t&&(s=s<t?s+1:s-1,c=!0),c||o===e||(o=o<e?o+1:o-1),s===t&&o===e||setTimeout(function(){return a(n.moveKnightTo(t,e))},250),n.setState({knightPos:[s,o]}),s===t&&o===e&&a()})}},{key:"reset",value:function(){this.setState({knightPos:null,pawnPos:null,path:null,busy:null,ready:null,finished:null,message:e.strings.MSG_INITIAL})}},{key:"onDrop",value:function(t,e,n){var a=this,r={};r[n]=[t,e],this.setState(r,function(){return a.checkPath()})}},{key:"checkPath",value:function(){var t,n,a=this,r=this.state,i=r&&r.knightPos,s=r&&r.pawnPos;i&&s?(t=O.apply(void 0,Object(p.a)(i)),n=O.apply(void 0,Object(p.a)(s)),this.setState({message:e.strings.MSG_PLEASE_WAIT}),this.fetchPath(t,n).then(function(t){return t.json()}).then(function(t){return a.drawPath(JSON.parse(t))}).catch(function(t){return a.setState({message:e.strings.MSG_EXCEPTION,finished:!0})})):this.setState({message:e.strings.MSG_DROP_THE_OTHER})}},{key:"fetchPath",value:function(t,e){var n="https://v86wed9i20.execute-api.eu-west-1.amazonaws.com/public/knight-path?start=".concat(t,"&end=").concat(e),a=new Request(n);return fetch(a)}},{key:"drawPath",value:function(t){var n=t;n.pop(),n.shift(),n=n.map(function(t){return function(t){var e=t.toLowerCase().split("");return[9-parseInt(e[1],10),1+"abcdefgh".indexOf(e[0])]}(t)}),this.setState({path:n,ready:!0,message:e.strings.MSG_START_ANIMATION})}},{key:"render",value:function(){var t=this.state,e=t&&t.message,n=t&&t.knightPos,a=t&&t.pawnPos,i=t&&t.busy,s=t&&t.ready,o=t&&t.finished,c=this.generateTableData();return r.a.createElement(y,null,r.a.createElement(m,{data:c,onDrop:this.onDrop.bind(this)}),r.a.createElement("div",null,!n&&!i&&r.a.createElement(E,{transport:"knightPos",className:"QN1 big withWhite"})),r.a.createElement("div",null,!a&&!i&&r.a.createElement(E,{transport:"pawnPos",className:"big P2 withBlack"})),r.a.createElement("div",null,s&&r.a.createElement("input",{type:"button",className:"bigBtn",value:"Go",onClick:this.animate}),o&&r.a.createElement("input",{className:"bigBtn",type:"button",value:"Start Over",onClick:this.reset.bind(this)})),r.a.createElement("div",{className:"info"},e))}}]),e}(r.a.Component));k.strings={MSG_INITIAL:"Drop the White Knight and the Dark Pawn over the chess table",MSG_PLEASE_WAIT:"Please wait while we are calculating a path.",MSG_EXCEPTION:"Something went wrong",MSG_DROP_THE_OTHER:"Great job! Now drag the other one too.",MSG_START_ANIMATION:"Click the button to see how the Knight attacks the Pawn",MSG_KNIGHT_WALKING:"Trop! Trop! Trop! (Knight walking sounds)",MSG_THE_END:"And the mighty White Knight ended his journey. Press the button to start over."};var j=k,S=(n(24),function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return r.a.createElement(j,null)}}]),e}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[11,2,1]]]);
//# sourceMappingURL=main.eeb01773.chunk.js.map